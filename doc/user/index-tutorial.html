<!--
FILE: 
AUTHOR: Barbara Frewen
DATE: Octobeer 15, 2007
PROJECT: crux
REVISION: $1.0 $
-->

<html>
<head>
<title>Crux: Index</title>

<link rel="stylesheet" href="stylesheet.css" type="text/css">

</head>

<body>
<div id="top">
<h>crux: peptide spectrum analysis tools</h>
</div>

<div id="main">
<div id="side">
<h3>Table of Contents</h3>

<dl>
   <dt><a href="home-tutorial.html">Home</a>
   <dt><a href="install-tutorial.html">Installation</a>
   <dt><a href="start-tutorial.html">Getting Started</a>
   <dt><a href="search-tutorial.html">Searching a Protein Database</a>
   <dt>Creating an Index</a>
   <dt><a href="customize-tutorial.html">Customizing a Search</a>
   <dt><a href="examples-tutorial.html">Examples</a>
   <dt><a href="crux.html">Man pages</a>
   <dt><a href="sitemap-tutorial.html">Index</a>
</dl>
<!--
<hr>
<h3>On this Page</h3>
<dl>
   <dt>First
   <dt>Second
</dl>
-->
</div><!--end side-->

<h3>Creating an Index</h3>
<p> The search for peptide-spectrum matches requires looking through
all possible peptides in the protein database (fasta file).  A text
file in fasta format is not well-suited for this task, so <span
class="prog">crux</span> can create an index to speed up the process.
To create an index for the fasta file used in the <a
href="search-tutorial.html">search example</a>, run this command.
</p>

<div class=code><code>
crux-create-index --mass-range 500 yeast-small.fasta</code>
</div>

<p>Once the index is created, you will see that there is a new
directory called <span class="file">yeast-small_crux_index</span>.  In this
directory are many file files with names beginning with <span
class="file">crux_index_</span> followed by a number.  Each of these
binary files contains one portion of the index.  The number of files
depends on the size of the peptides in the fasta file and the range of
masses contained in each portion.  With the option <span
class="out">--mass-range 500</span> we set the range to be 500 da
so that <span class="file">crux_index_1</span> indexes masses from 200
to 700 da. </p>

<div class="note"><em>Note: 200 da is the default minimum peptide
mass.  This and other parameters of the indexing process can be
changed in a parmeter file or on the command line.  See <a
href="customize-tutorial.html">Customizing a Search</a> for
details.</em>
</div>

<p> The text file <span class="file">crux_index_map</span>
lists the masses contained within each index file.  The other text file,
<span class="file">README</span>, describes all of the parameters used
in creating the index.  The remaining file in the directory is a
binary version of the fasta file, in this case <span
class="file">yeast-small_binary_fasta</span>. 
</p>

<h4>Using an index</h4>

<p>The index you have created can be used when searching for
peptide-spectrum matches and in the subsequent analysis of matches.
It can also be used by <span class="prog">crux-generate-matches</span>
to return a list of peptides and their properites from a fasta file.
(See <a href="utilities-tutorial.html">Crux Utilities</a> for more
details on <span class="prog">crux-generate-matches</span>).</p>

<p>Try repeating the searching <span class="file">demo2.ms2</span>
with the indexed protein database.  Run this command.

<div class="code"><code>
crux-search-for-matches demo2.ms2 small-yeast.fasta</code>
</div>
<!-- Use a different ms2 so analysis won't break w/each spec twice-->

<p><span class="prog">Crux</span> automatically looks for the index
directory associated with the fasta file name and uses it.  The <span
class="file">crux-analyze-matches</span> command can also be run as
before and this time it will use the index.</p>

</div><!--end main-->

<a href="customize-tutorial.html"><h4>Next: Customizing Searches</h4></a>

</body>
</html>
