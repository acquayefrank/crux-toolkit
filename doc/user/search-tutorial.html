<!--
FILE: search-tutorial.html 
AUTHOR: Barbara Frewen
DATE: Octobeer 15, 2007
PROJECT: crux
REVISION: $1.0 $
-->

<html>
<head>
<title>Crux: Search</title>

<link rel="stylesheet" href="stylesheet.css" type="text/css">

</head>

<body>
<div id="top">
<h>crux: peptide spectrum analysis tools</h>
</div>

<div id="main">
<div id="side">
<h3>Table of Contents</h3>

<dl>
   <dt><a href="home-tutorial.html">Home</a>
   <dt><a href="install-tutorial.html">Installation</a>
   <dt><a href="start-tutorial.html">Getting Started</a>
   <dt>Searching a Protein Database</a>
   <dt><a href="index-tutorial.html">Creating an Index</a>
   <dt><a href="customize-tutorial.html">Customizing a Search</a>
   <dt><a href="utilities-tutorial.html">Crux utilities</a>
   <dt><a href="examples-tutorial.html">Examples</a>
   <dt><a href="crux.html">Man pages</a>
   <dt><a href="sitemap-tutorial.html">Index</a>
</dl>
<!--
<hr>
<h3>On this Page</h3>
<dl>
   <dt><a href="#first">The first heading</a>
   <dt><a href="#second">The second heading</a>
</dl>
-->
</div><!--end side-->

<h3>Running a Simple Search</h3>
<p> Now that you have your environment <a
href="start-tutorial.html">set up</a> and the two input files 
in your working directory, you can conduct the search with this command.
</p>

<div class=code>
<code>$ crux-search-for-matches demo.ms2 small-yeast.fasta</code>
</div>

<p>While the search is running, you will see output like this
</p>

<pre>
INFO: Reading in ms2 file demo.ms2
INFO: Preparing protein fasta file small-yeast.fasta
INFO: Using amino acid alphabet (ACDEFGHIKLMNPQRSTVWYBUXZ).
INFO: Searching spectra
</pre>

<p>When the search has completed, it will say</p>
<pre>
INFO: crux-search-for-matches finished
</pre>

<p>Looking at the contents of the directory, you will see three new
files containing the search results: <span
class=file>crux_match_target_demo_<em>gibberish</em>, 
crux_match_decoy1_demo_<em>gibberish</em>, and
crux_match_decoy2_demo_<em>gibberish</em></span>
.  The <span class="file"><em>gibberish</em></span> will be replaced by
some random sequence of letters and numbers.  It is used to ensure
that each file gets a unique name.  These files are in a binary format
that can only be read by <span class=prog>crux</span>.</p>

<p><b>NOTE: This is actually a problem because analyze-matches doesn't
currently work without an index.  There are several solutions:
1. create an index for the first search, 2. create an sqt file for the
first search so the user can see some results, then create an index
and redo the results, 3. change analzye-matches to work without an
index.</b></p>


<div class=note><em>Note: Search results may also be returned in a
text format.  See the <a
href="customize-tutorial.html">customization</a> page for details.</em>
</div>

<p>The final step is to analyze our search results.  We expect that
some fraction of the spectra will not be identifiable as peptides (due
to chemical noise, multiple peptides co-eluting, poor fragmentation,
etc.).  The analysis step filters out those spectra and returns only the
high-quality peptide-spectrum matches.  Run this command.
</p>

<div class=code><code>
$ crux-analyze-matches . small-yeast.fasta > search-results</code>
</div>

<p>While the analysis is running, you will see output like this
</p>

<pre>
INFO: Running percolator
INFO: Getting PSMs from ./crux_match_target_demo_IZc8ya
INFO: Getting PSMs from ./crux_match_decoy_1_demo_4CkSbq
INFO: Getting PSMs from ./crux_match_decoy_2_demo_SXFCOF
INFO: Outputting matches.
</pre>

<p>When the analysis is complete it will print </p>
<pre>
INFO: crux-analyze-matches finished.
</pre>

<p>Take a look at the file <span class=file>search-results</span>.
The beginning of the file should look like this.
</p>

<pre>
P       31      3       1       1       3095.236572266  20.535989761    0.000000000     ELESAAYDHAEPVQPEDAPQDIANDELK
P       128     3       2       2       3095.236572266  19.932861328    0.000000000     ELESAAYDHAEPVQPEDAPQDIANDELK
P       133     2       3       3       1301.416137695  17.555320740    0.000000000     LDVDELGDVAQK
P       16      3       4       4       3095.236572266  15.313814163    0.000000000     ELESAAYDHAEPVQPEDAPQDIANDELK
P       84      3       5       5       3095.236572266  14.052746773    0.000000000     ELESAAYDHAEPVQPEDAPQDIANDELK
P       87      2       6       6       1301.416137695  13.424876213    0.000000000     LDVDELGDVAQK
P       115     2       7       7       1301.416137695  13.256440163    0.000000000     LDVDELGDVAQK
</pre>

<p>Each line is one peptide-spectrum match.  The first column is the
identifier 'P' to indicate that percolator was the algorithm used.  The
following columns are scan number, charge, rank (by?), rank (by?),
mass, analysis score, q-value, and sequence matched.  The results are
ranked by score with the best matches first.
</p>

<a href="index-tutorial.html"><h4>Next: Creating an Index</h4></a>

</div><!--end main-->

</body>
</html>
