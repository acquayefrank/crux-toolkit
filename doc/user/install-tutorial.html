<html>
<head>
<title>Crux installation instructions</title>

<link rel="stylesheet" href="crux.css" type="text/css">

</head>

<body>
<blockquote>

<div id="main">

<h1>Crux Installation Instructions</h1>

<p>This page will walk you through the steps of installing <span
class=prog>crux</span> on your computer.  It assumes you are working
in a command-line shell (readily available for Linux and Mac systems,
<a href="http://www.cygwin.com">cygwin</a> is the preferred choice for
Windows).  The installation requires that you have <span
class=prog>gcc</span> and <span class=prog>make</span> on your
computer. <!-- precompiled binaries may be  available?-->
All commands (words that you should type) are enclosed in
boxes.  (Do not type the leading <code>$</code>; it indicates the
prompt). These instructions will refer to your home directory as
<code>$HOME</code>.  You can type <code>$HOME</code>  in the commands
or you can use the fully qualified path to your home directory which
may be something like <code>/home/yourname/</code>.  

<div class=note><em>NOTE:</em> You can find out the location of your
home directory by logging in and typing <code>pwd</code> or <code>echo
$HOME</code>
</div> 


<a name=install></a>
<h2>Installation</h2>

<ol>
<li><b>Download the files</b>  <span class=prog>Crux</span> is freely
available for download under an 
<a href=""http://www.apache.org/licenses/LICENSE-2.0>Apache 2.0 license</a>.
On the download page you will be offered two types of files.
One is a set of compiled binaries (programs that are ready to run) and 
documentation zipped together and the other is a tarball containing
the source code and documentation.  If you are working on a Linux i686
or x86_64 system, the compiled binaries offer the easiest installation option.
Click on the link "Linux [architecture] Build (zipped)" to download
them to your computer.  If a window pops up, select the "Save" button.
If you are on any other system or if the binaries do not work on your
computer, you will need to download the source files.  Click on the
link "Source (tarred, gzipped)", again choosing to save to disk if
prompted. To check that the files were transfered correctly, run this
command

<div class=code><code>
$ md5sum <i>[downloaded file]</i></code>
</div>

and compare the output to the "MD5 checksum" link next to the file you
downloaded.  

<li><b>Unpack and install the files</b>
<p />
<b>Option 1: pre-compiled binaries.</b>  The file you downloaded
should be named something like 
<span class=file>crux-1.xx-i686-GNU-Linux.zip</span>.  Move it
to a convenient location and unpack the file with this command.

<div class=code><code>
$ unzip crux-x.xx-i686-GNU-Linux.zip</code>
</div>
You should now have a new directory, <span class=file>bdist</span>,
with two subdirectories <span class=file>bin</span>, and <span
class=file>doc</span>.  The <span class=prog>crux</span> programs are
in the <span class=file>bin</span> directory. You may want to move 
these files somewhere
more convenient for you, but otherwise, that completes the
installation!  Skip ahead to 
<a href="#path">Changing $PATH</a> for notes on how to run the executables.

<p />
<b>Option 2: build from source.</b> 

Building <span class=prog>crux</span> from source requires that you have previously
installed C and C++ compilers,
<a href="http://www.cmake.org"><span class=prog>cmake</span></a>
and
<a href="http://subversion.apache.org"><span class=prog>svn</span></a>.
Building <span class=prog>crux</span> also requires the
<a href="http://proteowizard.sourceforge.net"><span class=prog>Proteowizard</span></a>
and 
<a href="http://per-colator.com"><span class=prog>Percolator</span></a>
libraries. 
These will automatically be copied from the <span class=prog>Proteowizard</span>
and <span class=prog>Percolator</span></a> 
repositories and statically linked into <span class=prog>crux</span>.
<p />
If you are building on Windows you will need Visual C++ 2010.
The free version of Visual C++ 2010 is available
<a href="http://www.visualstudio.com/en-us/downloads#d-2010-express">here</a>.
<p />
Apple's C++ compilers are partially incompatible with the GNU compilers
and won't compile some parts of <span class=prog>crux</span> and the supporting libraries.
If you are building on Apple's OS X 
you will need to install a copy of the GNU C and C++ compilers
from a repository such as <a href="http://www.macports.org">MacPorts</a>.
We have used version 4.7 of the GNU <span class=prog>g++</span> compiler
downloaded from <a href="http://www.macports.org">MacPorts</a>.
Once you've installed 
<a href="http://www.macports.org">MacPorts</a>
the commands to install the GNU C and C++ compilers is
<div class=code>
<code>
$ sudo port install gcc47
</code>
</div>
<p />
<a href="http://www.macports.org">MacPorts</a>
allows you to install multiple versions of the GNU compilers.
You'll want to set your prefered version as the default for MacPorts:
<div class=code>
<code>
$ sudo port select --set gcc mp-gcc47
</code>
</div>
<p />
You will also have to configure the build to use the MacPorts compiler.
This is done using the environment variables
<span class=prog>PATH</span>, which sets the list of directories
that are searched for exectuables,
<span class=prog>CC</span>, which identifies the C compiler,
and
<span class=prog>CXX</span>, which identifies the C++ compiler.
Before staring your build set these environment variables to point
to the the MacPorts compilers.
For example:
<div class=code>
<code>
$ export PATH=/opt/local/bin:$PATH
<br/>
$ export CC=/opt/local/bin/gcc
<br/>
$ export CXX=/opt/local/bin/g++
</code>
</div>
<p />
The file you downloaded should be named something like <span class=file>crux-1.xx.source.tar.gz</span>, where <span class=file>x.xx</span>
is replaced with the most current release version.
<p />
On UNIX systems (including OS X), the steps to build
<span class=prog>crux</span> are:
<ol>
<li><b>Unpack</b> Move the downloaded file to a
convenient location and unpack it with this command.

<div class=code><code>
$ tar -zxvf crux-x.xx.Source.tar.gz
</div>
A new directory named <span class=file>crux-x.xx.Source</span> will be
created and a long list of files will stream by as they are being put
into the new directory.
</li>

<li><b>Configure</b>  Move into the <span class=file>crux-x.xx.Source</span>
directory from step 1.
Run the command
<div class=code><code>
cmake -DCMAKE_INSTALL_PREFIX:PATH=&lt;install directory&gt; .
</code>
</div>
where <span class=file>&lt;install directory&gt;</span> is
the location where you wish to install the <span class=prog>crux</span> programs. 
If you want <span class=prog>crux</span> to go in <span class=file>$HOME/bin</span>,
then <span class=file>&lt;install directory&gt;</span> would be <span class=file>$HOME</span>.
The installation process will automatically put the programs in a directory called
<span class=file>bin</span>.

<li><b>Make</b> To complete the process, run these two commands.</li>
<div class=code><code>
$ make<br>
$ make install
</code>
</div>

</ol>
</ol>

You should now see several executable files in <span
class=file>&lt;install directory&gt;/bin</span> beginning with <span
class=prog>crux</span>.  You will also find documentation and example
files in <span class=file>&lt;install directory&gt;/doc</span>.  
<p />
On Windows the steps are slightly different.

<ol>
<li>
<b>Obtain command line development environment</b>
Under the "Start" button
open the "Visual Studio 2010" folder, then open the "Vistual Studio Tools"
folder, and double-click on "Visual Studio x64 Win64 Command Prompt".
This will launch a 
<span class=file>cmd</span> shell configured to use the 
Microsoft development tools.
</li>
<li><b>Configure</b> In the 
<span class=file>cmd</span> shell  you just opened,
move into the <span class=file>crux-x.xx.Source</span>
directory from step 1.
Run the command
<div class=code><code>
cmake -DCMAKE_INSTALL_PREFIX:PATH=&lt;install directory&gt; -G "Visual Studio 10".
</code>
</div>
where <span class=file>&lt;install directory&gt;</span> is
the location where you wish to install the <span class=prog>crux</span> programs. 
If you want <span class=prog>crux</span> to go in <span class=file>$HOME/bin</span>,
then <span class=file>&lt;install directory&gt;</span> would be <span class=file>$HOME</span>.
The installation process will automatically put the programs in a directory called
<span class=file>bin</span>.

<li><b>Make</b> To complete the process, run these two commands.</li>
<div class=code><code>
$ msbuild /p:Configuration=Release /p:Platform=Win32 crux.sln
<br />
$ msbuild /p:Configuration=Release /p:Platform=Win32 /t install crux.sln
</code>
</div>

</ol>
<a name="path">
<h2>Changing $PATH</h2>
</a>
<p>You can always run any of the programs by specifying its full
path.  For example,</p>

<div class=code><code>
$ <em>&lt;install directory&gt;</em>/bin/crux search-for-matches</code>
</div>

<p>In this final step of the installation, we'll set things up so that
you can also run any of the programs by just typing its name.  This is
done with an environment variable called <span
class=code>$PATH</span>.  <span class=code>$PATH</span> is a list of
places that the computer looks for executable programs.  Find out what
is in the current list with this command.</p>

<div class=code><code>
$ echo $PATH</code><br>
</div>
<p>The value returned might look something like this
<code>
/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games
</code>
<p>The first directory in this colon-separated list, <span
class=out>/usr/local/bin</span>, is the first place the computer looks
for a program.  If it doesn't find the program there it tries <span
class=out>/usr/bin</span> and so on down the list.  You can either
move the crux executable files into one of these directories already
in your PATH, or you can add <span
class=code><em>&lt;install directory&gt;</em></span> to PATH with this
command.  (Remember to replace the word <em>&lt;install directory&gt;</em> with the
actual location of your installation)</p> 

<div class=code><code>
$ export PATH=$PATH:&lt;install directory&gt;/bin</code>
</div>

<p>Try '<span class=code>echo $PATH</span>' again to see that the
change was made.  <em>&lt;install directory&gt;/bin</em> should be at the end of the
list.  Now you can 
run the <span class=prog>crux</span> programs by just typing their
names.  Try this.</p>

<div class=code><code>
$ crux search-for-matches</code>
</div>

<p>The change to <span class=code>$PATH</span> is only temporary.  As
soon as you close the window, the change will disappear.  In order to
make the change every time you log on, add the line <span
class=code>export PATH=$PATH:&lt;install directory&gt;/bin</span> to the file <span
class=out>.bashrc</span> located in your home directory.  You will
have to log on again for the change to take effect.

</div><!--end main-->

<hr></hr>

<a href="crux.html">Crux home</a>
<p align="right"> <a href="start-tutorial.html">Next: Getting Started</a>

</blockquote>
</body>
</html>
