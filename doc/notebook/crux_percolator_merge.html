<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OOo-dev 2.0  (Linux)">
	<META NAME="CREATED" CONTENT="20070611;14101900">
	<META NAME="CHANGED" CONTENT="20070612;16260300">
	<STYLE>
	<!--
		@page { size: 8.5in 11in; margin: 0.79in }
		P { margin-bottom: 0.08in }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0in"><BR>
</P>
<HR>
<P STYLE="margin-bottom: 0in"><CODE><B><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Percolator
incorporation plan</FONT></FONT></B></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<HR>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><B><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Percolator
feature generation.</FONT></FONT></B></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Divided
percolator features into spectrum, match and run specific features.</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">1.
Match specific features:</FONT></FONT></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE>&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Xcorr,
Sp, ln(rSp), Mass, &#8710;</FONT></FONT></SPAN><CODE><FONT FACE="Courier, monospace"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">Mass:(observed
- calculated), abs(</FONT></SPAN><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">&#8710;</FONT></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">Mass),
Fraction of b&amp;y ion match, </FONT></SPAN></FONT></CODE></CODE>
</P>
<P STYLE="margin-bottom: 0in"><CODE>&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">enzN:N-term
tryptic?, enzC:C-term tryptic?, enzInt:number of missed cleavage
sites, </FONT></FONT></SPAN></CODE>
</P>
<P STYLE="margin-bottom: 0in"><CODE>&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">charge1~3:
charge state</FONT></FONT></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">2.
Spectrum specific features:</FONT></FONT></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE>&nbsp;&nbsp;&nbsp;<CODE>&#8710;</CODE><FONT FACE="Courier, monospace"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">Cn,
</FONT></SPAN><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">&#8710;</FONT></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">Cln,
ln(NumSp):log of number peptide in mass range</FONT></SPAN></FONT></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">3.
Intra-spectra(run) specific features:</FONT></FONT></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<FONT SIZE=3 STYLE="font-size: 13pt"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">ln(numPep),
ln(numProt), ln(pepSite)</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">The
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">spectrum
and match</FONT></FONT></SPAN></SPAN></CODE></CODE> features are
stored in the following structs,</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">struct
match_collection{</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">MATCH_T*
match[_MAX_NUMBER_PEPTIDES]; ///&lt; array of match object</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">BOOLEAN_T
scored_type[_SCORE_TYPE_NUM]; ///&lt; has the score type been
computed in each match</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">int
match_total; ///&lt; total_match_count</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">SPECTRUM_FEATURES_T</FONT></FONT></SPAN></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">*
features &lt;---------------- </FONT></FONT></SPAN><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Spectrum
specific features</FONT></FONT></SPAN></CODE></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">}</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">struct
match{</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">SPECTRUM_T*
spectrum; ///&lt; the spectrum we are scoring with</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">PEPTIDE_T*
peptide; ///&lt; the peptide we are scoring</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">float
match_scores[_SCORE_TYPE_NUM]; ///&lt; the scoring result array (use
enum_type SCORER_TYPE_T to index)</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">int
match_rank[_SCORE_TYPE_NUM]; ///&lt; the rank of scoring result (use
enum_type SCORER_TYPE_T to index)</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace">MATCH_FEATURES_T*</FONT></SPAN>
<FONT FACE="Courier, monospace">features</FONT> &lt;----------------
</FONT></SPAN><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Match
specific features</FONT></FONT></SPAN></CODE></CODE></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">}</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">The
run specific features are either not considered in our Plan B, or
will be incorporated through a separate object &ldquo;feature_vector&rdquo;
in Plan A.</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><B><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Plan
A.</FONT></FONT></B></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">In
plan A, the database search and Percolator interface are clearly
decoupled.</FONT></FONT></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">The
Percolator interface can be run separately on the PSM database output
files, which allows more straight forward parallelization for
potential cluster usage. However, the code complexity increases with
more book keeping and addition functionality added.</FONT></FONT></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Key
functions,</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//Serialize
the match and spectrum features of the PSM</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">void
serialize_percolator_features(</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">FILE*
output, //&lt; PSM database output file</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace"><CODE><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">MATCH_T*
match, //&lt; match features to be serialized</FONT></FONT></SPAN></SPAN></CODE></CODE></FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">MATCH_COLLECTION_T*
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//&lt;
match_collection features to be serialized</FONT></FONT></SPAN></SPAN></CODE></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">)</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//Generate
the run specific features from the</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//feature_vector
that is instantiated from the output file</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">void
process_run_specific_features(</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;</SPAN></CODE><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace"><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">FEATURE_VECTOR_T*
feature_vector</FONT></SPAN></SPAN></FONT></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">)</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//Returns
f</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">loat
array in the Percolator input format.</FONT></FONT></SPAN></SPAN></CODE></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">float*
get_percolator_features(</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;</SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">FEATURE_VECTOR_T*
feature_vector</FONT></FONT></SPAN></SPAN></CODE></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">)</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">/***************</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">*
pseudo-code</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">***************/</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//top_match_collection
will store all top ranked PSMs</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Match_collection_t*
top_</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection
= new_match_collection();</FONT></FONT></SPAN></SPAN></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Match_collection_t*
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection;</FONT></FONT></SPAN></SPAN></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">int
keep_top_rank = 5 </FONT></FONT></SPAN></SPAN></CODE>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">FILE*
output;</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">foreach
spectrum:</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//generates
a match_collection from the spectrum </FONT></FONT></SPAN></SPAN></CODE>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection
= new_</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection(spectrum);</FONT></FONT></SPAN></SPAN></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//serialize
the PSM's match &amp; spectrum features to output </FONT></FONT></SPAN></SPAN></CODE></CODE>
</P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;</SPAN></CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">foreach
top_match in match_collection upto keep_top_rank:</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">serialize_percolator_features(output,
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">top_match,
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection);</FONT></FONT></SPAN></SPAN></CODE></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//free
match_collection</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<FONT SIZE=3 STYLE="font-size: 13pt"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace"><FONT FACE="Courier, monospace">free(</FONT></FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection)</FONT></FONT></SPAN></SPAN></CODE></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">/*************second
part maybe a separate execution using the output
file*****************/</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//create
feature_vector object and read in the output PSM results.</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">FEATURE_VECTOR_T*
feature_vector = new_feature_vector(output);</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//Process
PSM output and generate the run specific features</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">process_run_specific_features(feature_vector);</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//create
iterator, to register each PSM feature to Percolator</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">FEATURE_VECTOR_ITERATOR_T*
feature_vector_iterator = new_feature_vector_iterator(</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">feature_vector)</FONT></FONT></SPAN></SPAN></CODE></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">foreach
vector in  </FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">feature_vector_iterator:</FONT></FONT></SPAN></SPAN></CODE></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;</SPAN></CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//Register
PSM with features to Percolator</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<FONT SIZE=3 STYLE="font-size: 13pt"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">pcRegisterPSM(get_sequence(v<CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">ector</FONT></FONT></SPAN></SPAN></CODE>),
get_percolator_features(<CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">vector</FONT></FONT></SPAN></SPAN></CODE>));</FONT></FONT></SPAN></SPAN></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT SIZE=3 STYLE="font-size: 13pt"><CODE><B><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Plan
B.</FONT></FONT></B></CODE></FONT></P>
<P STYLE="margin-bottom: 0in"><CODE><FONT FACE="Courier, monospace"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt">In
plan B, database search and Percolator interface are run together.
W<SPAN STYLE="text-decoration: none"><SPAN STYLE="text-decoration: none"><SPAN STYLE="text-decoration: none">hen
time to register PSMs, u<FONT FACE="Courier, monospace">se
&ldquo;</FONT></SPAN></SPAN></SPAN></FONT></SPAN><SPAN STYLE="text-decoration: none"><SPAN STYLE="text-decoration: none"><SPAN STYLE="text-decoration: none"><CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">get_percolator_features&rdquo;
method that takes a match and its match_collection as </FONT></FONT></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">a</FONT>rguments
and returns a float array in the Percolator input format. No
intermediate output files are created. However, because the PSMs from
the entire run are not stored, run specific features will not be used
for Percolator.</FONT></SPAN></SPAN></SPAN></SPAN></FONT></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">float*
get_percolator_features(</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">MATCH_T*
match</FONT></FONT></SPAN></SPAN></CODE><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">
,</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Match_collection_t*
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection</FONT></FONT></SPAN></SPAN></CODE></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">)</FONT></FONT></SPAN></SPAN></CODE></CODE></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">/***************</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">*
pseudo-code</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">***************/</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//top_match_collection
will store all top ranked PSMs</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><FONT FACE="Courier, monospace"><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Match_collection_t*
top_</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection
= new_match_collection();</FONT></FONT></SPAN></SPAN></CODE></FONT></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><FONT FACE="Courier, monospace"><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">Match_collection_t*
</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection;</FONT></FONT></SPAN></SPAN></CODE></FONT></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">int
keep_top_rank = 5</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">foreach
spectrum:</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//generates
a match_collection from the spectrum </FONT></FONT></SPAN></SPAN></CODE>
</P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace"><FONT FACE="Courier, monospace">match_collection
= new_</FONT></FONT></FONT></SPAN></SPAN><FONT FACE="Courier, monospace"><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection(spectrum);</FONT></FONT></SPAN></SPAN></CODE></FONT></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">foreach
top_match in match_collection upto keep_top_rank:</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//Register
PSM with features to Percolator</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">pcRegisterPSM(get_sequence(top_match),
get_percolator_features(top_match, match_collection))</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//transfers
the #top rank matches to top_match_collection</FONT></FONT></SPAN></SPAN></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">transfer_match(top_match_collection,
</FONT></FONT></SPAN></SPAN></CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection,
</FONT></FONT></SPAN></SPAN><CODE><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">keep_top_rank);</FONT></FONT></SPAN></SPAN></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">//free
match_collection</FONT></FONT></SPAN></SPAN></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><CODE><SPAN STYLE="text-decoration: none">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">free(</FONT></FONT></SPAN></SPAN><CODE><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-weight: medium"><FONT SIZE=3 STYLE="font-size: 13pt"><FONT FACE="Courier, monospace">match_collection)</FONT></FONT></SPAN></SPAN></CODE></CODE></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<HR>
<P STYLE="font-weight: medium"><BR><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
</BODY>
</HTML>