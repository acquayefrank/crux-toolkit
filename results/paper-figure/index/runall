#!/bin/bash
export PATH=../../../bin/:$PATH

#File spectra_random_1000.ms2 is a randomly selected 1000spectra from 
#file 090306-20cm-yeast-2h-04.ms2. Has one charge per spectrum
#that was randomly selected. Thus, a mix of 1, 2, 3 charged spectrua.

ms2='spectra_random_1000.ms2'
# ms2='test.ms2'
# ms2='test.100.ms2'
# ms2="1000.ms2"
# fasta='E_coli_contam.fasta'
# fasta='/home/aklammer/nr-NCBI-2006-02-16.fasta'
# fasta='/home/aklammer/crux/results/paper-figure/index/human-NCBI-042404.fasta"
fasta='/var/noble/data/protein_database/indexed/yeast.fasta'

if [[ ! -f "crux.params" ]]
then
    echo "There is no crux_parameter file, thus all runs will be done by \
default settings"
fi

# make index
#echo "creating index"
#ulimit -n 1000000
#(time create_index --parameter-file crux.params --cleavages all \
#    --missed-cleavages --verbosity 100 --redundancy unique $fasta) \
#    &> index_creation_result    

echo "Comparing runtime"

# first remove any pre existing *.dta files
# rm -rf *.dta

# make .dta files for Sequest
# ./ms22dta_right.pl $ms2

# now run Sequest and Crux compare and plot runtime
python compare_runtime.py $ms2 $fasta

# now that were are done, remove all *.dta files
# rm -rf *.dta
